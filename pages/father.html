<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feminist Analysis of the Father</title>
    <link rel="stylesheet" href="../style.css">
    <style>
        .popup {
            font-size: 1.2rem;
        }
    </style>
</head>

<body>

    <div id="header">
        <h1 class="title">Feminist Analysis of the Father</h1>
    </div>

    <div id="main">
        <div id="video-column">
            <div class="video-mask">
                <video autoplay controls>
                    <source src="../video/father.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
            <div id="end-buttons">
                Next:
                <div id="buttons">
                </div>
            </div>
        </div>

        <div id="popups">
        </div>
    </div>

    <div id="progress-container">
        <div id="progress-bar"></div>
    </div>

    <audio id="bg" src="../bg.mp3"></audio>

    <script>
        const pageEvents = [
            { time: 0, id: "p6", text: "The Father's reassertion as a dominant figure in the household following Gregor's metamorphosis is structurally guaranteed for male figures." },
            { time: 19, id: "p12", text: "“‘So come here already. Let these old matters rest. And show a little consideration for me as well.’ At once the women obeyed, hurried over to him, caressed him and quickly finished their letters.” (46)." },
            { time: 37, id: "p13", text: "“[Gregor] had learned on the very first day of his new life that his father considered only the utmost severity appropriate for him” (31)." },
            { time: 48, id: "p26", text: "“Sometimes Gregor’s father would wake up and, as if unaware he had been sleeping, would say to Gregor’s mother: ‘How long you’ve been sewing again today!’ and then go right back to sleep, which would prompt Gregor’s mother and sister to exchange weary smiles” (PAGE)." },
        ];
    </script>
    <script src="../script.js"></script>
    <script>
        // Get visited safely
        const params = new URLSearchParams(window.location.search);
        const page = parseInt(params.get("page"));
        let visited;
        try {
            visited = JSON.parse(sessionStorage.getItem("visited")) || [];
            if (!Array.isArray(visited)) visited = [];
        } catch (e) {
            visited = [];
        }

        visited.push("Father")

        // Save back as proper JSON
        sessionStorage.setItem("visited", JSON.stringify(visited));

        const characters = ["Grete", "Mother", "Gregor", "Father"];

        for (let character of characters) {
            if (!visited.includes(character)) {
                document.querySelector("#buttons").innerHTML += `
            <button onclick="goToPage('${character.toLowerCase()}.html?page=${page + 1}')">${character}</button>
        `;
            }
        }

        if(document.querySelector("#buttons").innerHTML.trim() == ""){
            document.querySelector("#buttons").innerHTML = `<button onclick="goToPage('quiz.html?page=${page}')">Conclusion</button>`
        }
    </script>

</body>

</html>